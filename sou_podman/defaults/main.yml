# Ansible default variables

# Execution variables (if set to true when running it will remove the templates folder and remove running containers)
clean: false

# General role configuration
configuration_files_folder: "sou_conf_files"
certificates_files_folder: "sou_certificates"
grafana_configuration_file: "grafana.ini"
haproxy_configuration_file: "haproxy.cfg"
prometheus_configuration_file: "prometheus.yml"

# SSL CERTIFICATES
ssl_certificates:
  key:
    name: "certificate.key"
    size: 2048
  cert:
    name: "certificate.cert"
    common_name: "haproxy"
    organization_name: "sourcesense_modulo_formativo"

# HAPROXY
haproxy_container:
  name: "sou_haproxy"
  image: "haproxy"
  state: "started"
  image_tag: "latest"
  exposed_port: "8443"
  mapped_ports: "8443:8443"
  volume: '{{ configuration_files_folder }}/{{ haproxy_configuration_file }}:/usr/local/etc/haproxy/haproxy.cfg:z'
  certificate: '{{ certificates_files_folder }}/{{ ssl_certificates.cert.name }}:/certificate.pem:z'

# PROMETHEUS
prometheus_container:
  name: "sou_prometheus"
  image: "prom/prometheus"
  image_tag: "latest"
  state: "started"
  exposed_port: "9090"
  mapped_ports: "9090:9090"
  volume: '{{ configuration_files_folder }}/{{ prometheus_configuration_file }}:/etc/prometheus/prometheus.yml:z'

# GRAFANA
grafana_container:
  name: "sou_grafana"
  image: "grafana/grafana"
  image_tag: "latest"
  state: "started"
  exposed_port: "3000"
  mapped_ports: "3000:3000"
  volume: '{{ configuration_files_folder }}/{{ grafana_configuration_file }}:/etc/grafana/grafana.ini:z'
